{
  "$schema": "https://json-schema.org/draft/2019-09/schema",
  "definitions": {
    "accessType": {
      "type": "string",
      "enum": ["OneTime", "Subscription", "Streaming", "Query"],
      "description": "Access type for data listings"
    },
    "paymentMethod": {
      "type": "string",
      "enum": ["Crypto_ETH", "Crypto_SOL", "Crypto_BTC", "SDN_Credits", "Fiat_Stripe", "Free"],
      "description": "Payment method accepted"
    },
    "SpatialCoverage": {
      "type": "object",
      "description": "Spatial coverage definition",
      "properties": {
        "TYPE": {
          "type": "string",
          "description": "Type of coverage: global, region, object_list",
          "x-flatbuffer-type": "string",
          "x-flatbuffer-field-id": 0
        },
        "REGIONS": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Regions covered, e.g., LEO, GEO, MEO",
          "x-flatbuffer-type": "[string]",
          "x-flatbuffer-field-id": 1
        },
        "OBJECT_IDS": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Specific NORAD IDs or catalog numbers",
          "x-flatbuffer-type": "[string]",
          "x-flatbuffer-field-id": 2
        }
      },
      "additionalProperties": false
    },
    "TemporalCoverage": {
      "type": "object",
      "description": "Temporal coverage definition",
      "properties": {
        "START_EPOCH": {
          "type": "string",
          "description": "Start epoch in ISO 8601 format",
          "x-flatbuffer-type": "string",
          "x-flatbuffer-field-id": 0
        },
        "END_EPOCH": {
          "type": "string",
          "description": "End epoch in ISO 8601 format",
          "x-flatbuffer-type": "string",
          "x-flatbuffer-field-id": 1
        },
        "UPDATE_FREQUENCY": {
          "type": "string",
          "description": "Update frequency: realtime, hourly, daily",
          "x-flatbuffer-type": "string",
          "x-flatbuffer-field-id": 2
        },
        "HISTORICAL_DEPTH": {
          "type": "integer",
          "minimum": 0,
          "maximum": 4294967295,
          "description": "Days of historical data available",
          "x-flatbuffer-type": "uint32",
          "x-flatbuffer-field-id": 3
        }
      },
      "additionalProperties": false
    },
    "DataCoverage": {
      "type": "object",
      "description": "Data coverage combining spatial and temporal",
      "properties": {
        "SPATIAL": {
          "$ref": "#/definitions/SpatialCoverage",
          "x-flatbuffer-field-id": 0
        },
        "TEMPORAL": {
          "$ref": "#/definitions/TemporalCoverage",
          "x-flatbuffer-field-id": 1
        }
      },
      "additionalProperties": false
    },
    "PricingTier": {
      "type": "object",
      "description": "Pricing tier for a listing",
      "properties": {
        "NAME": {
          "type": "string",
          "description": "Tier name, e.g., Basic, Pro, Enterprise",
          "x-flatbuffer-type": "string",
          "x-flatbuffer-field-id": 0
        },
        "PRICE_AMOUNT": {
          "type": "integer",
          "minimum": 0,
          "description": "Price in smallest unit (cents, satoshis, etc.)",
          "x-flatbuffer-type": "uint64",
          "x-flatbuffer-field-id": 1
        },
        "PRICE_CURRENCY": {
          "type": "string",
          "description": "Currency code: USD, ETH, SOL, SDN_CREDITS",
          "x-flatbuffer-type": "string",
          "x-flatbuffer-field-id": 2
        },
        "DURATION_DAYS": {
          "type": "integer",
          "minimum": 0,
          "maximum": 4294967295,
          "description": "Duration in days (0 = one-time purchase)",
          "x-flatbuffer-type": "uint32",
          "x-flatbuffer-field-id": 3
        },
        "RATE_LIMIT": {
          "type": "integer",
          "minimum": 0,
          "maximum": 4294967295,
          "description": "Rate limit in requests per hour",
          "x-flatbuffer-type": "uint32",
          "x-flatbuffer-field-id": 4
        },
        "FEATURES": {
          "type": "array",
          "items": { "type": "string" },
          "description": "List of features included in this tier",
          "x-flatbuffer-type": "[string]",
          "x-flatbuffer-field-id": 5
        }
      },
      "additionalProperties": false
    },
    "STF": {
      "type": "object",
      "description": "Storefront Listing - Data marketplace listing",
      "required": ["LISTING_ID", "PROVIDER_PEER_ID", "TITLE"],
      "properties": {
        "LISTING_ID": {
          "type": "string",
          "description": "Unique identifier for the listing",
          "x-flatbuffer-type": "string",
          "x-flatbuffer-field-id": 0
        },
        "PROVIDER_PEER_ID": {
          "type": "string",
          "description": "Peer ID of the data provider",
          "x-flatbuffer-type": "string",
          "x-flatbuffer-field-id": 1
        },
        "PROVIDER_EPM_CID": {
          "type": "string",
          "description": "IPFS CID of provider's EPM (Entity Profile Message)",
          "x-flatbuffer-type": "string",
          "x-flatbuffer-field-id": 2
        },
        "TITLE": {
          "type": "string",
          "description": "Title of the data listing",
          "x-flatbuffer-type": "string",
          "x-flatbuffer-field-id": 3
        },
        "DESCRIPTION": {
          "type": "string",
          "description": "Detailed description of the data offering",
          "x-flatbuffer-type": "string",
          "x-flatbuffer-field-id": 4
        },
        "DATA_TYPES": {
          "type": "array",
          "items": { "type": "string" },
          "description": "SDS data types offered, e.g., OMM, CDM, TLE",
          "x-flatbuffer-type": "[string]",
          "x-flatbuffer-field-id": 5
        },
        "COVERAGE": {
          "$ref": "#/definitions/DataCoverage",
          "description": "Coverage information (spatial and temporal)",
          "x-flatbuffer-field-id": 6
        },
        "SAMPLE_CID": {
          "type": "string",
          "description": "IPFS CID of sample data",
          "x-flatbuffer-type": "string",
          "x-flatbuffer-field-id": 7
        },
        "ACCESS_TYPE": {
          "$ref": "#/definitions/accessType",
          "description": "Type of access offered",
          "x-flatbuffer-field-id": 8
        },
        "ENCRYPTION_REQUIRED": {
          "type": "boolean",
          "description": "Whether encryption is required for data delivery",
          "x-flatbuffer-type": "bool",
          "x-flatbuffer-field-id": 9
        },
        "PRICING": {
          "type": "array",
          "items": { "$ref": "#/definitions/PricingTier" },
          "description": "Available pricing tiers",
          "x-flatbuffer-field-id": 10
        },
        "ACCEPTED_PAYMENTS": {
          "type": "array",
          "items": { "$ref": "#/definitions/paymentMethod" },
          "description": "Payment methods accepted",
          "x-flatbuffer-field-id": 11
        },
        "CREATED_AT": {
          "type": "integer",
          "minimum": 0,
          "description": "Unix timestamp when listing was created",
          "x-flatbuffer-type": "uint64",
          "x-flatbuffer-field-id": 12
        },
        "UPDATED_AT": {
          "type": "integer",
          "minimum": 0,
          "description": "Unix timestamp when listing was last updated",
          "x-flatbuffer-type": "uint64",
          "x-flatbuffer-field-id": 13
        },
        "ACTIVE": {
          "type": "boolean",
          "description": "Whether the listing is currently active",
          "x-flatbuffer-type": "bool",
          "x-flatbuffer-field-id": 14
        },
        "SIGNATURE": {
          "type": "array",
          "items": { "type": "integer", "minimum": 0, "maximum": 255 },
          "description": "Ed25519 signature from provider",
          "x-flatbuffer-type": "[ubyte]",
          "x-flatbuffer-field-id": 15
        }
      },
      "additionalProperties": false
    }
  },
  "$ref": "#/definitions/STF"
}
